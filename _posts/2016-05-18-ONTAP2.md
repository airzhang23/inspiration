---
layout: post
title: 走进 NetApp 存储操作系统之二
subtitle: Data ONTAP Introduction Series

---

今天来聊一聊NetApp的ONTAP 操作系统中的**全局命名空间**和**存储虚拟机**。

在聊这两个话题之前，让我们看看一家使用网络存储做文件共享的公司，会碰到什么样的问题。假如这家公司里面需要为10几个部门，以及各个子部门设置专门的共享空间，权限，并且数据量比较大，需要10几20台的存储来提供存储的话，他们需要在每一台存储上设置共享，权限，IP地址，主机名。而客户端在访问这些共享的时候需要使用不同的主机名或者IP地址，访问不同的共享，当然，这些都可以通过脚本或者操作系统的功能来做到自动化。但是从管理和维护层面来看的话，无疑是有一定的挑战性的。例如，增加共享，对现有共享，权限做修改，主机名，IP地址变更等，都需要管理员做出相应的调整。有些还需要对客户端做出更改才可以。

那么，我们把这个场景搬到集群操作系统中，看看会是怎样一番光景。首先所有的存储硬件都可以通过集群方式放在一个集群中，一个集群最多支持24个节点。管理一个统一的集群和管理单独的20几台机器的体验是完全不同的。其次，存储虚拟机是构建在整个集群上的逻辑概念，将存储的物理硬件部分剥离了出来，使得一个存储虚拟机可以使用整个集群上的空间，端口等所有资源，而不论这些资源位于集群中的哪个节点。也就是说，我可以在一个存储虚拟机中为所有的部门创建共享，让他们通过一个接口来访问。最后，因为这些共享资源都是通过统一的命名空间挂载到了存储虚拟机的命名空间中，不再需要单独的为每个共享从客户端单独挂载。这几点，将大大简化客户端的使用复杂度，存储端的配置，维护，管理的复杂度。

通过这个对比，存储虚拟机和命名空间的优点是显而易见的。



