---
layout: post
title: NetApp OnCommand 产品系列小结 - 第一集
subtitle: 三剑客 - OnCommand System Manager, Unified Manager, Performance Manager
---

熟悉NetApp产品的专业人员可能知道，在NetApp的产品线中，有一套管理软件称为OnCommand系列。
其中包含10几个软件。但是对于这些软件具体的功能，应用场景，能说明白的人恐怕不多。所以我打算通过这篇文章，能对这些产品做一个小结，希望能让更多的人了解NetApp在数据管理方面所提供的便捷性。

为了能够更加直观的了解这些产品的定位，我们站在一名存储管理员小张的角度来看这些产品能在哪些方面帮助到他。

假设小张是一家初创公司的系统管理员，所有的IT设备都由他来管理，当然也包括存储。开始的时候，这家初创公司的所有数据都是存放在一台服务器上面，但是随着业务量，人员，数据的增加，他们购买了一套NetApp的FAS2500系列的双头存储，跑的是最新的Clustered Data ONTAP。小张因为接受了厂商的培训，所以对于这套新设备的管理有一定的经验。但是通过命令行管理，也让他感到有点吃力。我们看看在这个时候有什么能帮到他。

- 第一个OnCommand系列产品登场： **OnCommnand System Manager**
	- 图形化界面
	- 可以管理一个或多个集群
	- 支持Linux、Windows
	- 免费
	- 功能：
	  - 发现和配置存储
	  - 监视和管理存储和HA配置
	  - 为SAN和NAS分配存储
	  - 配置NFS，CIFS，iSCSI, FC/FCoE协议
	  - 配置管理数据保护：SnapMirror 和 SnapVault
	  - 创建SVM
	  - 创建vFiler 和配置 CIFS
	  - 网络配置，Auto Support
	  - 其他

![image](/img/NTAP/OCSM.png)

可以说大部分的日常的管理，配置功能，都可以通过图形化的界面来实现。小张不用为了记忆更多的命令行，更多的配置流程而苦恼了。可以大幅度减少他的维护时间，让他可以做更多的其他的管理工作。

大概过了一年，整个架构运行的很稳定和顺畅，小张的公司也体会到了NetApp 集群存储带来的高可用性，便利性，灵活性。但是因为数据量的暴增，一套FAS2500的磁盘已经不够了，性能上在不久的将来也将达到极限。于是决定升级存储。这一次，他们再次体会到了集群系统的优势。那就是横向扩展（Scale Out）。相比大部分的存储所支持的向上扩展（Scale Up），NetApp的Clustered Data ONTAP 支持横向扩展，并且可以最多到24个NAS节点。容量和计算能力都会得到线性的提升。于是，2套新的FAS8020系列出现在了小张的面前。这次，小张在现场好好观摩NetApp和供应商的工程师怎么进行这次升级。硬件连接无误后，工程师把新加入的两套设备通过命令行加入到了新的集群，组成了一个6节点的大集群。并且他们在配置过程中使用到了一个工具，叫做 System Setup。 通过图形化的几面几分钟就配置好了新加入的节点的基本配置，例如网络，AutoSuport，CIFS，NFS协议，SVM等等。
整个升级过程并没有用太长时间。为了让新加入的机器能够马上投入战斗，通过卷的移动功能，在不影响前端业务的情况下，把原来在FAS2500上的卷中的一部分转移到了新的系统上。迁移过程对前端没有影响，完成后马上客户端就体会到了新的机型带来的性能提升。

小张的公司对此感到非常开心。但是随着时间的推移，新的问题出现了。那就是如何能够通过图形化的界面更直观的看到这套集群的性能，数据保护，容量，可用性等等是否健康。当出现问题的时候能够快速通知小张。针对这个问题，NetApp的工程师给了小张一个强有力的工具：

- **OnCommand Unified Manager for Clustered Data ONTAP** （OCUM）
	- 图形化界面
	- 可以管理一个或多个集群
	- 监视和管理：可用性，容量，性能，数据保护
	- Linux，Windows，VMWare vApp
    - 警报功能
    - 命令行支持
    - 双节点MetroCluster管理
    - 免费
    - 性能的监视部分需要另外一个软件：**OnCommand Performance Manager** （OPM）

![image](/img/NTAP/OCUM.png)

- **OnCommand Performance Manager**: 通过图形化界面，收集和分析一个或者多个集群的性能数据，并且报告给Unified Manager。

![image](/img/NTAP/OPM.png)

部署这两个软件也是非常简单。很快小张已经把他的集群加入到了Unified Manager和Performance Manager，并且建立了OCUM和OPM的 互联。并且配置了Alert，也就是当有所定义的问题出现的时候，例如某个节点出现故障，容量不足，性能出现问题，SnapMirror同步数据失败等等，都会通知到小张。并且通过OCUM的一个Dashboard界面就可以看到所有这些情况。当然不仅仅如此，OCUM提供了非常细小粒度的信息，集群，节点，SVM，聚合，卷等等都可以看到很详细的信息。

可以说有了OCUM和OPM，小张的公司已经为了将来的发展做了一个很好的准备。将来买入更多的节点，更多的集群，都可以通过OnCommand System Manager来配置，OCUM和OPM进行集中的管理。

接下来的一段时间，小张的公司发展迅猛，但是因为小张手中的这三个强力的工具，并没有让他在存储管理上面花费太多的精力。期间，几颗磁盘发生了硬件故障，通过联系经销商都很快的得到了更换。并且因为NetApp的Raid-DP技术，磁盘的故障并没有对业务产生影响。这也让小张对ONTAP系统的稳定性和健壮型有了更多的信心。也让他对ONTAP系统更加的熟悉。现在公司里面已经有两套集群，虽然都可以通过3大工具搞定，但是聪明的小张已经可以预见，如果在多一些系统，他有可能会出现力不从心，从而对业务的支持产生影响。为了预先解决这个问题，他和NetApp的工程师咨询，能不能让一些日常的维护工作自动化，这样不但可以节省他更多的时间，还可以让系统对业务的需求做出更快的响应。

小张会得到怎样的答复呢？我们下一集会详细的介绍哦。预知后事如何，请听下回分解。





